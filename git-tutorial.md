# gitとは
gitはファイルのバージョン管理を行うソフトウェアである。
次々とおこなわれるファイルの変更をバージョンとして記録し、いつでも記録したバージョンの戻れることが大きな特徴である。

## gitを用いたバージョン管理のメリット
- ファイルの変更を用意に追うことができる
- 複数人でのファイル管理がしやすい

## gitの使い方
gitではファイルの変更の記録をコミットという形で行う。
ファイルの変更の記録をすることをコミットするという。
コミットが行われた時点でのバージョンをgitでは行き来できる。
コミットが蓄えられる場所をリポジトリという。

### コミットまでの流れ
3つの場所"ワークツリー"、"ステージングエリア"、"リポジトリ"を用いてコミットを行う。

バージョン管理を行うファイルが置かれている場所をワークツリーという。
ワークツリーで変更したファイルをコミットしたい場合は、
変更を保存したいファイルをステージングエリアに登録する。
変更を保存したいファイルをステージングエリアに登録した状態でコミットを行うと、ステージングエリアに登録したファイルの変更が保存される。コミット後は、ステージングエリアには、何も登録されていない状態になる。

### ブランチを用いた平行作業
gitではブランチを分けることで、同じリポジトリないで異なる作業を並行して進めることができる。ブランチを分ける機能は、コミットの記録を枝分かれさせるための機能である。同時に複数の異なる作業をしたい場合に用いる。

またあるブランチの変更を別のブランチに反映させることができる。変更を別のブランチに反映させることをマージという。

## gitのコマンド
### gitを導入したら一回だけやるコマンド
- git config --global user.name "&lt;USER_NAME&gt;"

    名前を設定する。誰がコミットしたかの情報を残すために用いる。

- git config --global user.email "&lt;EMAIL&gt;"

    メールアドレスを設定する。

- git config --list

    設定内容を表示する。

### リポジトリの作成
- git init 

    新しいリポジトリを作成する。
    バージョン管理を行うファイルを含むフォルダ内で実行する。

### バージョン管理
- git status 

    現在のブランチ、ワークツリーでのファイルの状態を表示する。

- git add &lt;FILE_NAME&gt;

    ステージングエリアにファイルを登録する。&lt;FILE_NAME&gt;には、登録するファイルまでのパスを指定する。複数ある場合は半角スペースで区切る。「.」を指定すると、ワークツリー内のすべてのファイルを登録する。

- git commit 

    ステージングエリアのファイルをコミットする。このコマンドを実行後、自動でエディタが開き、コミットメッセージを記入する。

    **オプション**

    -a: 変更があるtrackedファイルをステージングエリアに登録しコミットする。**untrackedのファイルはコミットされない。**

    -m: コミットメッセ―ジを引数で与える。

- git log 

    コミットのログを表示する。

    **オプション**

    --oneline: 1コミット一行でコミットログを表示する。

- git branch 

    ブランチ一覧を表示する。引数に文字列を与えると、その文字列をブランチ名とする新たなブランチを作成する。

    **オプション**

    -vv: ローカルブランチごとの上流ブランチを表示。

- git switch 

    引数にブランチ名を指定することで、ブランチを切り替える。

- git diff 

    最新のコミットとワークツリーのファイルの違いを出力する。

- git restore 

    引数にワークツリーで変更されたファイルのファイルパスを与えることで、ファイルの変更を取り消す。

    **オプション**

    --staged: 引数に指定したファイルをのステージングエリアへの登録を取り消す。ワークツリーでの変更はそのまま。

- git merge 

    現在のブランチに引数で指定したブランチをマージする。

- git rm

    引数で指定したファイルを削除し、削除したことをステージングエリアに登録する。

- git checkout

    このコマンドはいろいろなことができる。
    - ブランチの作成、切り替え
    - 特定のコミット、特定のコミットのファイルを復元
    
    引数にコミットIDを指定すると、指定したコミットの状態のファイルを復元する。ブランチも専用のブランチが作成され切り替わる。
    
    引数にコミットIDとファイル名を指定すると、指定したコミットのファイルを現在のブランチの同名のファイルに反映させる。

### リモートリポジトリに対する操作
- git clone &lt;PATH&gt;

    リポジトリの内容でローカルリポジトリを複製する。
    現在いる場所に複製したリポジトリは作成される。
    &lt;PATH&gt;にはリポジトリまでのパス(ローカルなら.gitまでのパス、リモートならURL)を指定する。
    リモートリポジトリの複製はgithub上でもできる。
    
- git pull &lt;REPOSITORY&gt; &lt;BRANCH&gt;

    &lt;REPOSITORY&gt;リポジトリの&lt;BRANCH&gt;ブランチの更新を取得し、現在のブランチにマージする。
    引数を省略して実行する場合、現在のブランチに上流ブランチ（upstream branch）が設定されて入れば、上流ブランチの更新を取得し、現在のブランチにマージする。

- git push &lt;REPOSITORY&gt; &lt;BRANCH&gt;

    リモートの&lt;REPOSITORY&gt;リポジトリの&lt;BRANCH&gt;ブランチに、現在のブランチを反映させる。引数を省略した場合、originリポジトリの上流ブランチ反映される。

    **オプション**
    -u: コマンドの実行で更新されるリモートリポジトリのブランチを現在のブランチの上流ブランチに設定する。

    --set-upstream: -uのエイリアス。

- git remote

    ローカルリポジトリで管理しているリモートリポジトリを表示する。

    **オプション**

    -v: リポートリポジトリとURLの一覧を表示。

## githubフロー
gitHubフローはgitHubの開発で使用されているワークフローであり、gitフローに比べてシンプルな構成になっている。
gitHubフローではメインのmasterブランチと機能開発のためのfeatureブランチの2つのみのシンプルな構成になっている。
git-flowと異なる点として、Pull Requestを使うという点と、masterブランチは常にデプロイ可能という点がある。

### 6つのルール
GitHubフローには以下の6つのルールがある。
ルール1が最も重要で、それ以外のルールはルール1を実現するために存在する。
1. masterブランチは常にデプロイ可能である
2. 作業用ブランチをmasterから作成する
3. 作業用ブランチを定期的にプッシュする
4. プルリクエストを活用する
5. プルリクエストが承認されたらmasterへマージする
6. masterへのマージが完了したら直ちにデプロイを行う

### 開発の流れ
1.  開発リポジトリを、自分のアカウントへforkする（github上の操作）
2. masterブランチから、作業ブランチを切る
3. ローカルで開発、コミットしてforkしたブランチへpushする
4. 本家リポジトリへPull Requestを出し、フィードバックを受けながら開発を進める
5. レビュワーに承認されたら、本家リポジトリへマージする
6. デプロイする

## forkをするとどうなるのか
githubでリポジトリをforkすると自分専用の複製リモートリポジトリが作れる。
forkしたことはfork元に通知される。

## forkをする理由
gitとgithubを用いた共同開発で、開発リポジトリをforkすることが推奨されている。

その理由は
「唯一の開発リポジトリを各開発者がローカルにcloneして開発する」方法にはないメリットが、「各開発者がforkしたリポジトリを使って開発する」方法に存在するためである。

「各開発者がforkしたリポジトリを使って開発する」方法では各開発者は変更をforkしたリポジトリに反映させる。
このメリットとして、各開発者の作業領域を独立に保つことができる。
forkしたリポジトリをfork元リポジトリに反映させたい場合はgithub上でfork元にpull requestを送る。

## git用語
- 上流ブランチ

    ローカルブランチに対して設定されるリモートのブランチ。

- origin

    gitによって設定されるクローン元のリポジトリの別名。"git remote -v"で確認できる。

# 参考リンク
[ブランチの呼び方](https://qiita.com/shinya_nakashima/items/fab635a3c04858d65c47)